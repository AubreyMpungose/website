<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta name="generator" content="quarto-0.3.22">
  <meta name="author" content="Dr.&nbsp;Mine Çetinkaya-Rundel">
  <title>STA 210 - Spring 2022 - SLR: Prediction + model evaluation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto.css" id="theme">

  <script src="../site_libs/clipboard/clipboard.min.js"></script>
  <script src="../site_libs/quarto-html/tabby.min.js"></script>
  <script src="../site_libs/quarto-html/popper.min.js"></script>
  <script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
  <link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet">
  <link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal-references {
      display: none;
    }
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal #title-slide.center,
    .reveal .title-slide.center,
    .reveal .controls .navigate-left .controls-arrow,
    .reveal .controls .navigate-right .controls-arrow {
      margin-top: -15px;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
<meta name="twitter:title" content="STA 210 - Spring 2022 - SLR: Prediction + model evaluation">
<meta name="twitter:description" content="STA 210 - Spring 2022">
<meta name="twitter:image" content="https://sta210-s22.github.io/website//images/twitter-card.png">
<meta name="twitter:creator" content="@minebocek">
<meta name="twitter:image-height" content="418">
<meta name="twitter:image-width" content="800">
<meta name="twitter:card" content="summary_large_image">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">SLR: Prediction + model evaluation</h1>
  <p class="subtitle">STA 210 - Spring 2022</p>
  <p class="author">Dr.&nbsp;Mine Çetinkaya-Rundel</p>
</section>

<section>
<section id="welcome" class="title-slide slide level1 center">
<h1>Welcome</h1>

</section>
<section id="announcements" class="slide level2">
<h2>Announcements</h2>
<ul>
<li class="fragment">New on the course website: <a href="../course-faq.html">FAQ</a></li>
<li class="fragment">New communication tool: Slack
<ul>
<li class="fragment">Find the invite link in your inbox / on Sakai announcements</li>
<li class="fragment">Use #general for questions, #random for random 🤪</li>
<li class="fragment">Use code formatting for for questions involving code (see Course FAQ for a demo video)</li>
</ul></li>
<li class="fragment">My office hours: All virtual for now, hope to move 1 hour / week to in person later in the semester</li>
</ul>
</section>
<section id="hybrid-teaching" class="slide level2 smaller">
<h2>Hybrid teaching</h2>
<ul>
<li class="fragment">Lectures:
<ul>
<li class="fragment">In person as long as university says so (and I don’t have COVID)</li>
<li class="fragment">If you can’t be in class (and you’re well enough to follow along), watch live (or the recording later) on Panopto</li>
<li class="fragment">Watching live and have questions? Post on Slack!</li>
<li class="fragment">In class and see someone ask a question on Slack? Please raise it to me!</li>
</ul></li>
<li class="fragment">Labs:
<ul>
<li class="fragment">Not live streamed / recorded</li>
<li class="fragment">Lab 2 (next Monday) - individual</li>
<li class="fragment">Lab 3 onwards - in teams, if teammates are in isolation, set up team Zoom calls</li>
</ul></li>
</ul>
</section>
<section id="computational-setup" class="slide level2">
<h2>Computational setup</h2>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># load packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)   <span class="co"># for data wrangling and visualization</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(tidymodels)  <span class="co"># for modeling</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(usdata)      <span class="co"># for the county_2019 dataset</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(scales)      <span class="co"># for pretty axis labels</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(glue)        <span class="co"># for constructing character strings</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># set default theme and larger font size for ggplot2</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>ggplot2<span class="sc">::</span><span class="fu">theme_set</span>(ggplot2<span class="sc">::</span><span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section id="application-exercise" class="title-slide slide level1 center">
<h1>Application exercise</h1>
<div class="appex">
<p>📋 <a href="https://github.com/sta210-s22/?q=ae-2-dcbikeshare&amp;type=all&amp;language=&amp;sort=">github.com/sta210-s22/ae-2-dcbikeshare</a></p>
</div>
</section>

<section>
<section id="uninsurance-and-high-school-graduation-rates-in-nc" class="title-slide slide level1 center">
<h1>Uninsurance and high school graduation rates in NC</h1>

</section>
<section id="data-source" class="slide level2">
<h2>Data source</h2>
<ul>
<li class="fragment">The data come from <a href="https://openintrostat.github.io/usdata/reference/county_2019.html"><code>usdata::county_2019</code></a></li>
<li class="fragment">These data have been compiled from the 2019 American Community Survey</li>
</ul>
<div class="cell">

</div>
</section>
<section id="uninsurance-rate" class="slide level2">
<h2>Uninsurance rate</h2>

<img data-src="lec-4_files/figure-revealjs/unnamed-chunk-1-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="high-school-graduation-rate" class="slide level2">
<h2>High school graduation rate</h2>

<img data-src="lec-4_files/figure-revealjs/unnamed-chunk-2-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="examining-the-relationship" class="slide level2">
<h2>Examining the relationship</h2>
<ul>
<li class="fragment">The <a href="https://www.nc.gov/agency/labor-and-economic-analysis-division">NC Labor and Economic Analysis Division (LEAD)</a>, which “administers and collects data, conducts research, and publishes information on the state’s economy, labor force, educational, and workforce-related issues”.</li>
<li class="fragment">Suppose that an analyst working for LEAD is interested in the relationship between uninsurance and high school graduation rates in NC counties.</li>
</ul>
<div class="fragment">
<div class="question">
<p>What type of visualization should the analyst make to examine the relationship between these two variables?</p>
</div>
</div>
</section>
<section id="data-prep" class="slide level2">
<h2>Data prep</h2>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>county_2019_nc <span class="ot">&lt;-</span> county_2019 <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"North Carolina"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>  <span class="fu">select</span>(name, hs_grad, uninsured)</span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a>county_2019_nc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 100 × 3
   name             hs_grad uninsured
   &lt;chr&gt;              &lt;dbl&gt;     &lt;dbl&gt;
 1 Alamance County     86.3      11.2
 2 Alexander County    82.4       8.9
 3 Alleghany County    77.5      11.3
 4 Anson County        80.7      11.1
 5 Ashe County         85.1      12.6
 6 Avery County        83.6      15.9
 7 Beaufort County     87.7      12  
 8 Bertie County       78.4      11.9
 9 Bladen County       81.3      12.9
10 Brunswick County    91.3       9.8
# … with 90 more rows</code></pre>
</div>
</div>
</section>
<section id="uninsurance-vs.-hs-graduation-rates" class="slide level2">
<h2>Uninsurance vs.&nbsp;HS graduation rates</h2>
<div class="cell">
<p></p><details>
<summary>Code</summary><p></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">ggplot</span>(county_2019_nc,</span>
<span id="cb4-2"><a href="#cb4-2"></a>       <span class="fu">aes</span>(<span class="at">x =</span> hs_grad, <span class="at">y =</span> uninsured)) <span class="sc">+</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb4-4"><a href="#cb4-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">labs</span>(</span>
<span id="cb4-7"><a href="#cb4-7"></a>    <span class="at">x =</span> <span class="st">"High school graduate"</span>, <span class="at">y =</span> <span class="st">"Uninsured"</span>,</span>
<span id="cb4-8"><a href="#cb4-8"></a>    <span class="at">title =</span> <span class="st">"Uninsurance vs. HS graduation rates"</span>,</span>
<span id="cb4-9"><a href="#cb4-9"></a>    <span class="at">subtitle =</span> <span class="st">"North Carolina counties, 2015 - 2019"</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>  ) <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> county_2019_nc <span class="sc">%&gt;%</span> <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Durham County"</span>), <span class="fu">aes</span>(<span class="at">x =</span> hs_grad, <span class="at">y =</span> uninsured), <span class="at">shape =</span> <span class="st">"circle open"</span>, <span class="at">color =</span> <span class="st">"#8F2D56"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="at">stroke =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> county_2019_nc <span class="sc">%&gt;%</span> <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Durham County"</span>), <span class="fu">aes</span>(<span class="at">x =</span> hs_grad, <span class="at">y =</span> uninsured, <span class="at">label =</span> name), <span class="at">color =</span> <span class="st">"#8F2D56"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">nudge_y =</span> <span class="dv">3</span>, <span class="at">nudge_x =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="lec-4_files/figure-revealjs/nc-uninsured-hsgrad-scatter-1.png" style="width:80.0%" class="r-stretch"></section>
<section id="modeling-the-relationship" class="slide level2">
<h2>Modeling the relationship</h2>
<div class="cell">
<p></p><details>
<summary>Code</summary><p></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">ggplot</span>(county_2019_nc, <span class="fu">aes</span>(<span class="at">x =</span> hs_grad, <span class="at">y =</span> uninsured)) <span class="sc">+</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"#8F2D56"</span>) <span class="sc">+</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="at">x =</span> <span class="st">"High school graduate"</span>, <span class="at">y =</span> <span class="st">"Uninsured"</span>,</span>
<span id="cb5-8"><a href="#cb5-8"></a>    <span class="at">title =</span> <span class="st">"Uninsurance vs. HS graduation rates"</span>,</span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="at">subtitle =</span> <span class="st">"North Carolina counties, 2015 - 2019"</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="lec-4_files/figure-revealjs/nc-uninsured-hsgrad-scatter-line-1.png" style="width:80.0%" class="r-stretch"></section>
<section id="fitting-the-model" class="slide level2">
<h2>Fitting the model</h2>
<p>With <code>fit()</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>nc_fit <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">fit</span>(uninsured <span class="sc">~</span> hs_grad, <span class="at">data =</span> county_2019_nc)</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">tidy</span>(nc_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   33.9      3.99        8.50 2.12e-13
2 hs_grad       -0.262    0.0468     -5.61 1.88e- 7</code></pre>
</div>
</div>
</section>
<section id="augmenting-the-data" class="slide level2">
<h2>Augmenting the data</h2>
<p>With <code>augment()</code> to add columns for predicted values (<code>.fitted</code>), residuals (<code>.resid</code>), etc.:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>nc_aug <span class="ot">&lt;-</span> <span class="fu">augment</span>(nc_fit<span class="sc">$</span>fit)</span>
<span id="cb8-2"><a href="#cb8-2"></a>nc_aug</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 100 × 8
   uninsured hs_grad .fitted  .resid   .hat .sigma    .cooksd .std.resid
       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
 1      11.2    86.3   11.3  -0.0633 0.0107   2.10 0.00000501    -0.0305
 2       8.9    82.4   12.3  -3.39   0.0138   2.07 0.0186        -1.63  
 3      11.3    77.5   13.6  -2.27   0.0393   2.09 0.0252        -1.11  
 4      11.1    80.7   12.7  -1.63   0.0199   2.09 0.00633       -0.790 
 5      12.6    85.1   11.6   1.02   0.0100   2.10 0.00122        0.492 
 6      15.9    83.6   12.0   3.93   0.0112   2.06 0.0203         1.89  
 7      12      87.7   10.9   1.10   0.0133   2.10 0.00191        0.532 
 8      11.9    78.4   13.3  -1.44   0.0328   2.09 0.00830       -0.700 
 9      12.9    81.3   12.6   0.324  0.0174   2.10 0.000218       0.157 
10       9.8    91.3    9.95 -0.151  0.0291   2.10 0.0000806     -0.0734
# … with 90 more rows</code></pre>
</div>
</div>
</section>
<section id="visualizing-the-model-i" class="slide level2 smaller">
<h2>Visualizing the model I</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div>
<ul>
<li><strong>Black circles:</strong> Observed values (<code>y = uninsured</code>)</li>
</ul>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-6-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section>
<section id="visualizing-the-model-ii" class="slide level2 smaller">
<h2>Visualizing the model II</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div>
<ul>
<li>Black circles: Observed values (<code>y = uninsured</code>)</li>
<li><strong>Pink solid line:</strong> Least squares regression line</li>
</ul>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-7-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section>
<section id="visualizing-the-model-iii" class="slide level2 smaller">
<h2>Visualizing the model III</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div>
<ul>
<li>Black circles: Observed values (<code>y = uninsured</code>)</li>
<li>Pink solid line: Least squares regression line</li>
<li><strong>Maroon triangles:</strong> Predicted values (<code>y = .fitted</code>)</li>
</ul>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-8-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section>
<section id="visualizing-the-model-iv" class="slide level2 smaller">
<h2>Visualizing the model IV</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div>
<ul>
<li>Black circles: Observed values (<code>y = uninsured</code>)</li>
<li>Pink solid line: Least squares regression line</li>
<li>Maroon triangles: Predicted values (<code>y = .fitted</code>)</li>
<li><strong>Gray dashed lines:</strong> Residuals</li>
</ul>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-9-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section>
<section id="evaluating-the-model-fit" class="slide level2">
<h2>Evaluating the model fit</h2>
<div class="question">
<p>How can we evaluate whether the model for predicting uninsurance rate from high school graduation rate for NC counties is a good fit?</p>
</div>
</section></section>
<section>
<section id="model-evaluation" class="title-slide slide level1 center">
<h1>Model evaluation</h1>

</section>
<section id="two-statistics" class="slide level2 smaller">
<h2>Two statistics</h2>
<ul>
<li class="fragment"><p><strong>R-squared</strong>, <span class="math inline">\(R^2\)</span> : Percentage of variability in the outcome explained by the regression model (in the context of SLR, the predictor)</p>
<p><span class="math display">\[
R^2 = Cor(x,y)^2 = Cor(y, \hat{y})^2
\]</span></p></li>
<li class="fragment"><p><strong>Root mean square error, RMSE</strong>: A measure of the average error (average difference between observed and predicted values of the outcome)</p>
<p><span class="math display">\[
RMSE = \sqrt{\frac{\sum_{i = 1}^n (y_i - \hat{y}_i)^2}{n}}
\]</span></p></li>
</ul>
<div class="fragment">
<div class="question">
<p>What indicates a good model fit? Higher or lower <span class="math inline">\(R^2\)</span>? Higher or lower RMSE?</p>
</div>
</div>
</section>
<section id="r-squared" class="slide level2 smaller">
<h2>R-squared</h2>
<ul>
<li class="fragment"><p>Ranges between 0 (terrible predictor) and 1 (perfect predictor)</p></li>
<li class="fragment"><p>Unitless</p></li>
<li class="fragment"><p>Calculate with <code>rsq()</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">rsq</span>(nc_aug, <span class="at">truth =</span> uninsured, <span class="at">estimate =</span> .fitted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rsq     standard       0.243</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="interpreting-r-squared" class="slide level2 smaller">
<h2>Interpreting R-squared</h2>
<div class="cell">

</div>
<div class="poll">
<p>🗳️ <strong>Vote on Slack</strong></p>
<p>The <span class="math inline">\(R^2\)</span> of the model for predicting uninsurance rate from high school graduation rate for NC counties is 24.3%. Which of the following is the correct interpretation of this value?</p>
<div>
<ul>
<li>High school graduation rates correctly predict 24.3% of uninsurance rates in NC counties.</li>
<li>24.3% of the variability in uninsurance rates in NC counties can be explained by high school graduation rates.</li>
<li>24.3% of the variability in high school graduation rates in NC counties can be explained by uninsurance rates.</li>
<li>24.3% of the time uninsurance rates in NC counties can be predicted by high school graduation rates.</li>
</ul>
</div>
</div>
</section>
<section id="alternative-approach-for-r-squared" class="slide level2">
<h2>Alternative approach for R-squared</h2>
<p>Alternatively, use <code>glance()</code> to construct a single row summary of the model fit, including <span class="math inline">\(R^2\)</span>:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">glance</span>(nc_fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic     p.value    df logLik   AIC   BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     0.243         0.235  2.09      31.5 0.000000188     1  -214.  435.  443.
# … with 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
<div class="sourceCode" id="cb14"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">glance</span>(nc_fit)<span class="sc">$</span>r.squared</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code>[1] 0.2430694</code></pre>
</div>
</div>
</section>
<section id="rmse" class="slide level2">
<h2>RMSE</h2>
<ul>
<li class="fragment"><p>Ranges between 0 (perfect predictor) and infinity (terrible predictor)</p></li>
<li class="fragment"><p>Same units as the outcome variable</p></li>
<li class="fragment"><p>Calculate with <code>rmse()</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb16"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">rmse</span>(nc_aug, <span class="at">truth =</span> uninsured, <span class="at">estimate =</span> .fitted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        2.07</code></pre>
</div>
</div></li>
<li class="fragment"><p>The value of RMSE is not very meaningful on its own, but it’s useful for comparing across models (more on this when we get to regression with multiple predictors)</p></li>
</ul>
</section>
<section id="obtaining-r-squared-and-rmse" class="slide level2">
<h2>Obtaining R-squared and RMSE</h2>
<ul>
<li class="fragment"><p>Use <code>rsq()</code> and <code>rmse()</code>, respectively</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">rsq</span>(nc_aug, <span class="at">truth =</span> uninsured, <span class="at">estimate =</span> .fitted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rsq     standard       0.243</code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">rmse</span>(nc_aug, <span class="at">truth =</span> uninsured, <span class="at">estimate =</span> .fitted)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 rmse    standard        2.07</code></pre>
</div>
</div></li>
</ul>
<!-- -->
<ul>
<li class="fragment">First argument: data frame containing <code>truth</code> and <code>estimate</code> columns</li>
<li class="fragment">Second argument: name of the column containing <code>truth</code> (observed outcome)</li>
<li class="fragment">Third argument: name of the column containing <code>estimate</code> (predicted outcome)</li>
</ul>
</section>
<section id="purpose-of-model-evaluation" class="slide level2">
<h2>Purpose of model evaluation</h2>
<ul>
<li class="fragment"><span class="math inline">\(R^2\)</span> tells us how our model is doing to predict the data we <em>already have</em></li>
<li class="fragment">But generally we are interested in prediction for a new observation, not for one that is already in our sample, i.e.&nbsp;<strong>out-of-sample prediction</strong></li>
<li class="fragment">We have a couple ways of <em>simulating</em> out-of-sample prediction before actually getting new data to evaluate the performance of our models</li>
</ul>
</section></section>
<section>
<section id="splitting-data" class="title-slide slide level1 center">
<h1>Splitting data</h1>

</section>
<section id="spending-our-data" class="slide level2">
<h2>Spending our data</h2>
<ul>
<li class="fragment">There are several steps to create a useful model: parameter estimation, model selection, performance assessment, etc.</li>
<li class="fragment">Doing all of this on the entire data we have available leaves us with no other data to assess our choices</li>
<li class="fragment">We can allocate specific subsets of data for different tasks, as opposed to allocating the largest possible amount to the model parameter estimation only (which is what we’ve done so far)</li>
</ul>
</section>
<section id="simulation-data-splitting" class="slide level2 smaller">
<h2>Simulation: data splitting</h2>
<div class="columns">
<div class="column" style="width:30%;">
<div>
<ul>
<li>Take a random sample of 10% of the data and set aside (testing data)</li>
<li>Fit a model on the remaining 90% of the data (training data)</li>
<li>Use the coefficients from this model to make predictions for the testing data</li>
<li>Repeat 10 times</li>
</ul>
</div>
</div><div class="column" style="width:70%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-15-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section>
<section id="predictive-performance" class="slide level2 smaller">
<h2>Predictive performance</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div class="question">
<div>
<ul>
<li>How consistent are the predictions for different testing datasets?</li>
<li>How consistent are the predictions for counties with high school graduation rates in the middle of the plot vs.&nbsp;in the edges?</li>
</ul>
</div>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-16-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="bootstrapping" class="title-slide slide level1 center">
<h1>Bootstrapping</h1>

</section>
<section id="bootstrapping-our-data" class="slide level2">
<h2>Bootstrapping our data</h2>
<ul>
<li class="fragment">The idea behind bootstrapping is that if a given observation exists in a sample, there may be more like it in the population</li>
<li class="fragment">With bootstrapping, we simulate resampling from the population by resampling from the sample we observed</li>
<li class="fragment">Bootstrap samples are the sampled <em>with replacement</em> from the original sample and same size as the original sample
<ul>
<li class="fragment">For example, if our sample consists of the observations {A, B, C}, bootstrap samples could be {A, A, B}, {A, C, A}, {B, C, C}, {A, B, C}, etc.</li>
</ul></li>
</ul>
</section>
<section id="simulation-bootstrapping" class="slide level2 smaller">
<h2>Simulation: bootstrapping</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div>
<ul>
<li>Take a bootstrap sample – sample with replacement from the original data, same size as the original data</li>
<li>Fit model to the sample and make predictions for that sample</li>
<li>Repeat many times</li>
</ul>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-17-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section>
<section id="predictive-performance-1" class="slide level2 smaller">
<h2>Predictive performance</h2>
<div class="columns">
<div class="column" style="width:25%;">
<div class="question">
<div>
<ul>
<li>How consistent are the predictions for different bootstrap datasets?</li>
<li>How consistent are the predictions for counties with high school graduation rates in the middle of the plot vs.&nbsp;in the edges?</li>
</ul>
</div>
</div>
</div><div class="column" style="width:75%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-18-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="uninsurance-and-high-school-graduation-rates-in-new-york" class="title-slide slide level1 center">
<h1>Uninsurance and high school graduation rates in New York</h1>

</section>
<section id="uninsurance-vs.-hs-graduation-rates-1" class="slide level2">
<h2>Uninsurance vs.&nbsp;HS graduation rates</h2>
<div class="cell">
<p></p><details>
<summary>Code</summary><p></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode numberSource r cell-code number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>county_2019_ny <span class="ot">&lt;-</span> county_2019 <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">filter</span>(state <span class="sc">==</span> <span class="st">"New York"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>  <span class="fu">select</span>(name, hs_grad, uninsured)</span>
<span id="cb22-5"><a href="#cb22-5"></a></span>
<span id="cb22-6"><a href="#cb22-6"></a><span class="fu">ggplot</span>(county_2019_ny,</span>
<span id="cb22-7"><a href="#cb22-7"></a>       <span class="fu">aes</span>(<span class="at">x =</span> hs_grad, <span class="at">y =</span> uninsured)) <span class="sc">+</span></span>
<span id="cb22-8"><a href="#cb22-8"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>(<span class="at">scale =</span> <span class="dv">1</span>, <span class="at">accuracy =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-12"><a href="#cb22-12"></a>    <span class="at">x =</span> <span class="st">"High school graduate"</span>, <span class="at">y =</span> <span class="st">"Uninsured"</span>,</span>
<span id="cb22-13"><a href="#cb22-13"></a>    <span class="at">title =</span> <span class="st">"Uninsurance vs. HS graduation rates"</span>,</span>
<span id="cb22-14"><a href="#cb22-14"></a>    <span class="at">subtitle =</span> <span class="st">"New York counties, 2015 - 2019"</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>  ) <span class="sc">+</span></span>
<span id="cb22-16"><a href="#cb22-16"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> <span class="st">"pink"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>

</div>
<img data-src="lec-4_files/figure-revealjs/ny-uninsured-hsgrad-scatter-1.png" style="width:80.0%" class="r-stretch"></section>
<section id="data-splitting" class="slide level2">
<h2>Data splitting</h2>

<img data-src="lec-4_files/figure-revealjs/unnamed-chunk-19-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="bootstrapping-1" class="slide level2">
<h2>Bootstrapping</h2>

<img data-src="lec-4_files/figure-revealjs/unnamed-chunk-20-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="comparing-ny-and-nc" class="slide level2">
<h2>Comparing NY and NC</h2>
<div class="question">
<p>Why are the fits from the NY models more variable than those from the NC models?</p>
</div>
</section></section>
<section>
<section id="recap" class="title-slide slide level1 center">
<h1>Recap</h1>

</section>
<section id="terminology" class="slide level2">
<h2>Terminology</h2>
<ul>
<li class="fragment">Outcome: y</li>
<li class="fragment">Predictor: x</li>
<li class="fragment">Observed y, <span class="math inline">\(y\)</span>: truth</li>
<li class="fragment">Predicted y, <span class="math inline">\(\hat{y}\)</span>: fitted, estimated</li>
<li class="fragment">Residual: difference between observed and predicted outcome for a given value of predictor</li>
</ul>
</section>
<section id="model-evaluation-1" class="slide level2 smaller">
<h2>Model evaluation</h2>
<ul>
<li class="fragment">One concern in evaluating models is how well they do for prediction</li>
<li class="fragment">We’re generally interested in how well a model might do for predicting the outcome for a new observation, not for predicting the outcome for an observation we used to fit the model (and already know its observed value)</li>
<li class="fragment">Evaluating predictive performance: Split the data into testing and training sets, build models using only the training set, and evaluate their performance on the testing set, and repeat many times to see how your model holds up to “new” data</li>
<li class="fragment">Quantifying variability of of estimates: Bootstrap the data, fit a model, obtain coefficient estimates and/or measures of strength of fit, and repeat many times to see how your model holds up to “new” data</li>
<li class="fragment">Today we introduced these concepts, throughout the semester we’ll learn how to implement them (i.e., write the code) and how to interpret their results</li>
</ul>
</section>
<section id="splitting-vs.-bootstrapping" class="slide level2">
<h2>Splitting vs.&nbsp;bootstrapping</h2>
<div class="question">
<p><strong>Food for thought:</strong> On the right are fits from various splits of the data into testing and training. On the left are fits to bootstrap samples of the data. Which one shows more variability and why?</p>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-21-1.png" style="width:100.0%"></p>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="lec-4_files/figure-revealjs/unnamed-chunk-22-1.png" style="width:100.0%"></p>
</div>
</div>
</div>
</div>

<p><img src="images/logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://sta210-s22.github.io/website/">sta210-s22.github.io/website</a></p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="../site_libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>


  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,

'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'multiplex': {"secret":null,"id":"6b7068f5c6e392f4","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,

        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        setTimeout(function() {
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          let href = ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

<div class="reveal-references"></div></body></html>